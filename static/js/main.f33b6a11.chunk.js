(this["webpackJsonpfelix-news-app"]=this["webpackJsonpfelix-news-app"]||[]).push([[0],{102:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),s=a.n(l),o=(a(102),a(10)),i=a(11),c=a(2),d=a(13),u=a(12),h=a(5),m=a.n(h),g=a(14),p=a(8),b=a(16),f=(a(69),a(46)),y=a(66),v=a(94),E=a(7),C=a.n(E),S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isUserLoggedIn:n.props.isUserLoggedIn,username:n.props.username,userFullName:n.props.userFullName,categories:[]},n.logoutUser=n.logoutUser.bind(Object(c.a)(n)),n.loadCategories=n.loadCategories.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadCategories()}},{key:"logoutUser",value:function(){localStorage.clear(),this.props.handleUserLoggedOut(),this.setState({isUserLoggedIn:!1}),this.props.history.push("/felix-news-app/")}},{key:"loadCategories",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Category",headers:{"Content-Type":"application/json"},data:{}},e.next=4,C()(t).then((function(e){a.setState({categories:e.data.categories}),console.log(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(f.a,{bg:"dark",variant:"dark",fixed:"top",expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(f.a.Brand,{href:"/felix-news-app"},"Felix News App"),r.a.createElement(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(f.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(y.a,{className:"mr-auto"},r.a.createElement(p.b,{className:"nav-link",to:"/felix-news-app/"},"Home"),r.a.createElement(p.b,{className:"nav-link",to:"/articleAdd"},"Add articles"),r.a.createElement(p.b,{className:"nav-link",to:"/publishArticles"},"Publish articles"),r.a.createElement(v.a,{title:"Categories",id:"basic-nav-dropdown"},this.state.categories.map((function(e,t){return r.a.createElement(p.b,{key:t,className:"dropdown-item",to:"/articles/byCategories/".concat(e.CategoryId)},e.Name)}))),r.a.createElement(p.b,{className:"nav-link",to:"/users"},"Users")),r.a.createElement(y.a,{className:"nav navbar-nav navbar-right"},this.state.isUserLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:"/",className:"nav-link"},"Hello, ",this.state.username),r.a.createElement("span",{className:"nav-link text-secondary pr-2 pl-2"},"|"),r.a.createElement("button",{onClick:this.logoutUser,className:"nav-link btn btn-link"},"LogOut")):r.a.createElement("div",{className:"form-inline"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Login")," ",r.a.createElement("span",{className:"text-secondary pr-2 pl-2"},"|"),r.a.createElement(p.b,{className:"nav-link",to:"/registration"},"Register"))))))}}]),a}(n.Component),N=Object(b.g)(S),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"This is the about page")}}]),a}(n.Component),k=a(65),A=a.n(k),O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={username:"",firstName:"",lastName:"",telephoneNumber:"",cellphoneNumber:"",email:"",password:"",confirmPassword:"",roleId:""},n.handleEmailAddressChange=n.handleEmailAddressChange.bind(Object(c.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(c.a)(n)),n.handleConfirmPasswordChange=n.handleConfirmPasswordChange.bind(Object(c.a)(n)),n.handleRegistrationSubmit=n.handleRegistrationSubmit.bind(Object(c.a)(n)),n.handleFirstNameChange=n.handleFirstNameChange.bind(Object(c.a)(n)),n.handleLastNameChange=n.handleLastNameChange.bind(Object(c.a)(n)),n.handleTelephoneNumberChange=n.handleTelephoneNumberChange.bind(Object(c.a)(n)),n.handleCellphoneNumberChange=n.handleCellphoneNumberChange.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("email-address").focus()}},{key:"handleEmailAddressChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleConfirmPasswordChange",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"handleFirstNameChange",value:function(e){this.setState({firstName:e.target.value})}},{key:"handleLastNameChange",value:function(e){this.setState({lastName:e.target.value})}},{key:"handleTelephoneNumberChange",value:function(e){this.setState({telephoneNumber:e.target.value})}},{key:"handleCellphoneNumberChange",value:function(e){this.setState({cellphoneNumber:e.target.value})}},{key:"handleRegistrationSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password===this.state.confirmPassword){var a={method:"post",url:"https://newsappapi20200817171221.azurewebsites.net/api/Account/Register",headers:{"Content-Type":"application/json"},data:JSON.stringify({Email:this.state.email,Password:this.state.password,ConfirmPassword:this.state.confirmPassword})};C()(a).then((function(e){console.log(e.data);var a={method:"post",url:"/api/User/Register",headers:{"Content-Type":"application/json"},data:JSON.stringify({UserId:e.data.userId,Username:t.state.email,Password:e.data.newPassword,FirstName:t.state.firstName,LastName:t.state.lastName,Email:t.state.email,TelephoneNumber:t.state.telephoneNumber,CellphoneNumber:t.state.cellphoneNumber})};C()(a).then((function(e){if(console.log(JSON.stringify(e.data)),!1===e.data.usernameAlreadyExists)return alert(e.data.message),r.a.createElement(b.a,{to:"/login"});alert("Username already exists")})).catch((function(e){console.log(e),alert("The user colud not be registered")}))})).catch((function(e){console.log(e),alert("The user could not be registered")}))}else alert("The passwords dont match")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-0 col-sm-0 col-md-2"}),r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8"},r.a.createElement("form",{className:"jumbotron bg-secondary",onSubmit:this.handleRegistrationSubmit},r.a.createElement("h1",{className:"text-center text-black"},"Registration form"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"email-address"},"Email address"),r.a.createElement("input",{type:"text",className:"form-control",id:"email-address",name:"email-address",placeholder:"Enter your email address",minLength:"15",maxLength:"35",onChange:this.handleEmailAddressChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Enter your password",minLength:"6",maxLength:"20",onChange:this.handlePasswordChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"confirm-password"},"Confirm password"),r.a.createElement("input",{type:"password",className:"form-control",id:"confirm-password",name:"confirm-password",placeholder:"Confirm your password",minLength:"6",maxLength:"20",onChange:this.handleConfirmPasswordChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"first-name"},"First name"),r.a.createElement("input",{type:"text",className:"form-control",id:"first-name",name:"first-name",placeholder:"Enter your first name",minLength:"2",maxLength:"40",onChange:this.handleFirstNameChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"last-name"},"Last name"),r.a.createElement("input",{type:"text",className:"form-control",id:"last-name",name:"last-name",placeholder:"Enter your last name",minLength:"2",maxLength:"40",onChange:this.handleLastNameChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"telephone-number"},"Telephone number"),r.a.createElement(A.a,{mask:["(",/[1-9]/,/[0-9]/,/[0-9]/,")","-",/[0-9]/,/[0-9]/,/[0-9]/,"-",/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/],className:"form-control",placeholder:"(809)-000-0000",minLength:"14",required:!0,id:"my-input-id",onBlur:function(){},onChange:this.handleTelephoneNumberChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-light",htmlFor:"cellphone-number"},"Cellphone number"),r.a.createElement(A.a,{mask:["1","(",/[1-9]/,/[0-9]/,/[0-9]/,")","-",/[0-9]/,/[0-9]/,/[0-9]/,"-",/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/],minLength:"14",className:"form-control",placeholder:"1(809)-000-0000",id:"my-input-id",onBlur:function(){},onChange:this.handleCellphoneNumberChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-dark btn-block",type:"submit"},"Register")),r.a.createElement("div",{className:"form-group"},r.a.createElement(p.b,{to:"/",className:"btn btn-light btn-block"},"Cancel")))),r.a.createElement("div",{className:"col-0 col-sm-0 col-md-2"})))}}]),a}(n.Component),j=a(32),I=a.n(j),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",isUserLoggedIn:n.props.isUserLoggedIn},n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.handleUsernameOnChange=n.handleUsernameOnChange.bind(Object(c.a)(n)),n.handlePasswordOnChange=n.handlePasswordOnChange.bind(Object(c.a)(n)),n.handleSuccessfulLogin=n.handleSuccessfulLogin.bind(Object(c.a)(n)),n.handleFailedLogin=n.handleFailedLogin.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleSuccessfulLogin",value:function(){alert("Welcome "+localStorage.getItem("userName")),console.log("successful"),this.props.handleUserLoggedIn(!0),this.props.history.push("/")}},{key:"handleFailedLogin",value:function(){this.setState({password:""});var e=document.getElementById("password");e.value=this.state.password,e.focus(),alert("the login has failed, check your credentials and try again")}},{key:"handleUsernameOnChange",value:function(e){e.preventDefault();var t=e.target.value;this.setState({username:t})}},{key:"handlePasswordOnChange",value:function(e){e.preventDefault();var t=e.target.value;this.setState({password:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=I.a.stringify({grant_type:"password",username:this.state.username,password:this.state.password},{encode:!1}),n={method:"post",url:"https://newsappapi20200817171221.azurewebsites.net/Token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a};C()(n).then((function(e){localStorage.setItem("userToken",e.data.access_token),localStorage.setItem("userName",e.data.userName),localStorage.setItem("isUserLoggedIn",!0),t.handleSuccessfulLogin(),window.location.reload(!1)})).catch((function(e){console.log(e),console.log(a),t.handleFailedLogin()}))}},{key:"render",value:function(){return this.state.isUserLoggedIn?r.a.createElement(b.a,{to:"/felix-news-app/"}):r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-0 col-sm-0 col-md-2"}),r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8"},r.a.createElement("form",{className:"jumbotron bg-secondary",onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"text-center text-black"},"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username",className:"text-light"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:this.handleUsernameOnChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"text-light"},"Password"),r.a.createElement("input",{name:"password",id:"password",type:"password",onChange:this.handlePasswordOnChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-dark btn-block"},"Login")))),r.a.createElement("div",{className:"col-0 col-sm-0 col-md-2"})))}}]),a}(n.Component),U=a(34),M=a(36),T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={articles:[],searchCriteria:"",loading:!0,loadingMore:!1,notFound:!1,pageSize:6,pageCount:1,totalPages:0},n.handleSearchChange=n.handleSearchChange.bind(Object(c.a)(n)),n.handleShowMore=n.handleShowMore.bind(Object(c.a)(n)),n.getAllArticles=n.getAllArticles.bind(Object(c.a)(n)),n.getArticlesByTitle=n.getArticlesByTitle.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"getAllArticles",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/GetArticles?pageNumber=".concat(this.state.pageCount,"&pageSize=").concat(this.state.pageSize),headers:{},data:""},e.next=4,C()(t).then((function(e){var t;a.state.pageCount>1?(t=Object(U.a)(a.state.articles),e.data.items.length>0&&e.data.items.forEach((function(e){t.push(e)}))):t=e.data.items,a.setState({articles:t}),a.setState({totalPages:e.data.totalPages}),a.setState({loading:!1}),a.setState({loadingMore:!1}),a.setState({notFound:!1}),console.log(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getArticlesByTitle",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/GetArticlesByTitle?title=".concat(t,"&pageNumber=").concat(this.state.pageCount,"&pageSize=").concat(this.state.pageSize),headers:{}},e.next=3,C()(a).then((function(e){if(1===n.state.pageCount){n.setState({articles:e.data.items});var t=e.data.totalPages;n.setState({totalPages:t}),n.setState({loading:!1}),n.setState({loadingMore:!1}),0===e.data.items.length?n.setState({notFound:!0}):n.setState({notFound:!1})}else{var a;a=Object(U.a)(n.state.articles),e.data.items.length>0&&e.data.items.forEach((function(e){a.push(e)})),n.setState({articles:a}),n.setState({totalPages:e.data.totalPages}),n.setState({loading:!1}),n.setState({loadingMore:!1}),0===e.data.items.length?n.setState({notFound:!0}):n.setState({notFound:!1})}})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllArticles()}},{key:"handleSearchChange",value:function(e){var t=this;e.preventDefault(),this.setState({searchCriteria:e.target.value},(function(){1!==t.state.pageCount&&t.setState({pageCount:1}),t.state.searchCriteria?(t.setState({loading:!0}),t.getArticlesByTitle(t.state.searchCriteria)):t.setState({articles:[]},(function(){t.setState({loading:!0}),t.setState({searchCriteria:""}),t.getAllArticles()}))}))}},{key:"handleShowMore",value:function(e){var t=this;e.preventDefault(),this.state.pageCount<this.state.totalPages&&this.setState({pageCount:this.state.pageCount+1},(function(){t.state.searchCriteria?(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.getArticlesByTitle(t.state.searchCriteria)):(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.getAllArticles())}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center text-light"},"Here are the latest updates"),r.a.createElement("hr",{className:"bg-light"}),r.a.createElement("label",{className:"text-light font-weight-bold mr-2",htmlFor:"search"},"Search for a title:"),r.a.createElement("input",{className:"form-control",name:"search",id:"search",type:"text",placeholder:"Title",onChange:this.handleSearchChange}),r.a.createElement("hr",{className:"bg-light"}),this.state.loading?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"Loading..."):r.a.createElement("div",{className:"pb-5"},this.state.notFound?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"No article was found for this criteria"):r.a.createElement("div",{className:"row"},this.state.articles.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4"},r.a.createElement(M.a,{className:"mb-2",bg:"secondary",key:e.ArticleId},r.a.createElement(M.a.Img,{variant:"top",src:"data:image/jpeg;base64,".concat(e.MainImage)}),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,{className:"text-light"},e.Title),r.a.createElement(M.a.Text,{className:"text-light"},e.Summary),r.a.createElement(p.b,{className:"btn btn-block btn-dark",to:"/articles/".concat(e.ArticleId)},"Go to the article")),r.a.createElement(M.a.Footer,null,e.Categories.map((function(e,t){return r.a.createElement(p.b,{key:t,className:"nav-link text-light",to:"/articles/byCategories/".concat(e.CategoryId)},e.Name)})))))})),r.a.createElement("div",{className:"container"},this.state.pageCount===this.state.totalPages?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"There are no more articles for this request..."):this.state.loadingMore?r.a.createElement("h6",{className:"text-center bg-secondary rounded p-1"},"Loading..."):r.a.createElement("button",{className:"btn btn-secondary btn-block",id:"show-more-button",onClick:this.handleShowMore},"Show more")))))}}]),a}(n.Component),P=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={Article:{},loading:!0},n.loadData=n.loadData.bind(Object(c.a)(n)),n.buildArticleBody=n.buildArticleBody.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"loadData",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/?id="+this.props.match.params.id,headers:{},data:""},e.next=4,C()(t).then((function(e){var t=e.data;a.setState({Article:t}),a.setState({loading:!1})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(){}},{key:"buildArticleBody",value:function(){return console.log("ready"),console.log(this.state.Article.body),{__html:r.a.createElement("p",null,"hola")}}},{key:"render",value:function(){return 0===this.state.Article.ArticleId?r.a.createElement("div",null,r.a.createElement("h1",{className:"text-light"},"La informaci\xf3n no est\xe1 disponible")):r.a.createElement("div",null,this.state.loading?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"Loading..."):r.a.createElement("div",null,r.a.createElement("section",{className:"pb-5"},r.a.createElement("h1",{className:"text-light"},this.state.Article.Title),r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{className:"img-fluid",src:"data:image/jpeg;base64,"+this.state.Article.MainImage,style:{maxWidth:"100%"},alt:""})),r.a.createElement("article",{dangerouslySetInnerHTML:{__html:this.state.Article.Body},id:"articleBody",className:"text-light container pt-5 pb-5"}),r.a.createElement(p.b,{className:"btn btn-secondary btn-block mb-5 ",to:"/"},"Go back to home"))))}}]),a}(n.Component),L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row bg-secondary text-center"},r.a.createElement("div",{className:"col-lg-6 offset-lg-3 col-sm-6 offset-sm-3 col-12 p-3 error-main"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8 col-12 col-sm-10 offset-lg-2 offset-sm-1"},r.a.createElement("h1",{className:"m-0"},"404"),r.a.createElement("h6",null,"Page not found"),r.a.createElement("p",null,r.a.createElement("strong",null,"Click here")," to go to the home page:"),r.a.createElement(p.b,{className:"btn btn-dark btn",to:"/"},"Home page"))))))}}]),a}(n.Component),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={categoryId:n.props.match.params.id,articles:[],searchCriteria:"",loading:!0,loadingMore:!1,notFound:!1,pageSize:6,pageCount:1,totalPages:0,categoryName:""},n.getArticlesByCategory=n.getArticlesByCategory.bind(Object(c.a)(n)),n.getArticlesByCategoryAndTitle=n.getArticlesByCategoryAndTitle.bind(Object(c.a)(n)),n.handleSearchChange=n.handleSearchChange.bind(Object(c.a)(n)),n.handleShowMore=n.handleShowMore.bind(Object(c.a)(n)),n.getCategory=n.getCategory.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getArticlesByCategory(),this.getCategory(this.state.categoryId)}},{key:"getCategory",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Category/".concat(t),headers:{}},e.next=3,C()(a).then((function(e){console.log(e.data),n.setState({categoryName:e.data.Name})})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArticlesByCategory",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/GetAllArticlesByCategory?categoryId=".concat(this.state.categoryId,"&pageNumber=").concat(this.state.pageCount,"&pageSize=").concat(this.state.pageSize),headers:{}},e.next=3,C()(t).then((function(e){var t;a.state.pageCount>1?(t=Object(U.a)(a.state.articles),e.data.items.length>0&&e.data.items.forEach((function(e){t.push(e)}))):t=e.data.items,a.setState({articles:t}),a.setState({totalPages:e.data.totalPages}),a.setState({loading:!1}),a.setState({loadingMore:!1}),a.setState({notFound:!1}),console.log(e.data)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getArticlesByCategoryAndTitle",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/GetAllArticlesByCategoryAndTitle?categoryId=".concat(this.state.categoryId,"&title=").concat(t,"&pageNumber=").concat(this.state.pageCount,"&pageSize=").concat(this.state.pageSize),headers:{}},e.next=3,C()(a).then((function(e){if(1===n.state.pageCount){n.setState({articles:e.data.items});var t=e.data.totalPages;n.setState({totalPages:t}),n.setState({loading:!1}),n.setState({loadingMore:!1}),0===e.data.items.length?n.setState({notFound:!0}):n.setState({notFound:!1})}else{var a;a=Object(U.a)(n.state.articles),e.data.items.length>0&&e.data.items.forEach((function(e){a.push(e)})),n.setState({articles:a}),n.setState({totalPages:e.data.totalPages}),n.setState({loading:!1}),n.setState({loadingMore:!1}),0===e.data.items.length?n.setState({notFound:!0}):n.setState({notFound:!1})}})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSearchChange",value:function(e){var t=this;e.preventDefault(),this.setState({searchCriteria:e.target.value},(function(){1!==t.state.pageCount&&t.setState({pageCount:1}),t.state.searchCriteria?(t.setState({loading:!0}),t.getArticlesByCategoryAndTitle(t.state.searchCriteria)):t.setState({articles:[]},(function(){t.setState({loading:!0}),t.setState({searchCriteria:""}),t.getArticlesByCategory()}))}))}},{key:"handleShowMore",value:function(e){var t=this;e.preventDefault(),this.state.pageCount<this.state.totalPages&&this.setState({pageCount:this.state.pageCount+1},(function(){t.state.searchCriteria?(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.getArticlesByCategoryAndTitle(t.state.searchCriteria)):(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.getArticlesByCategory())}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center text-light"},"Here are the latest updates for: ",this.state.categoryName),r.a.createElement("hr",{className:"bg-light"}),r.a.createElement("label",{className:"text-light font-weight-bold mr-2",htmlFor:"search"},"Search for a title:"),r.a.createElement("input",{className:"form-control",name:"search",id:"search",type:"text",placeholder:"Title",onChange:this.handleSearchChange}),r.a.createElement("hr",{className:"bg-light"}),this.state.loading?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"Loading..."):r.a.createElement("div",null,this.state.notFound?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"No article was found for this criteria"):r.a.createElement("div",{className:"row"},this.state.articles.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4"},r.a.createElement(M.a,{className:"mb-2",bg:"secondary",key:e.ArticleId},r.a.createElement(M.a.Img,{variant:"top",src:"data:image/jpeg;base64,".concat(e.MainImage)}),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,{className:"text-light"},e.Title),r.a.createElement(M.a.Text,{className:"text-light"},e.Summary),r.a.createElement(p.b,{className:"btn btn-block btn-dark",to:"/articles/".concat(e.ArticleId)},"Go to the article")),r.a.createElement(M.a.Footer,null,e.Categories.map((function(e,t){return r.a.createElement(p.b,{key:t,className:"nav-link text-light",to:"/articles/byCategories/".concat(e.CategoryId)},e.Name)})))))})),r.a.createElement("div",{className:"container"},this.state.pageCount===this.state.totalPages?r.a.createElement("h4",{className:"text-center bg-secondary rounded p-5"},"There are no more articles for this request..."):this.state.loadingMore?r.a.createElement("h6",{className:"text-center bg-secondary rounded p-1"},"Loading..."):r.a.createElement("button",{className:"btn btn-secondary btn-block",id:"show-more-button",onClick:this.handleShowMore},"Show more")))))}}]),a}(n.Component),F=a(56),D=a.n(F),z=a(57),R=a.n(z),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={title:"",summary:"",mainImage:"",body:"",categories:[],addCategories:[]},n.loadCategories=n.loadCategories.bind(Object(c.a)(n)),n.handleAddCategory=n.handleAddCategory.bind(Object(c.a)(n)),n.handleCreateArticle=n.handleCreateArticle.bind(Object(c.a)(n)),n.handleMainImageOnChange=n.handleMainImageOnChange.bind(Object(c.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(c.a)(n)),n.handleSummaryChange=n.handleSummaryChange.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handleCreateArticle",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.addCategories.length>0&&""!==this.state.body)){e.next=8;break}return a=JSON.stringify({Title:this.state.title,Summary:this.state.summary,MainImage:Array.from(this.state.mainImage),UploadedUserId:"b7ba64f8-9b22-4904-b6e1-0c173cd776ec",CreatedAt:(new Date).toLocaleString(),Body:this.state.body,Categories:this.state.addCategories}),n={method:"post",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/AddPendingArticle",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:a},e.next=6,C()(n).then((function(e){console.log(e.data),r.props.history.push("/")})).catch((function(e){401===e.response.status&&(alert("The session has expired, login and try again"),localStorage.clear(),r.props.history.push("/"))}));case 6:e.next=9;break;case 8:alert("Could not insert article because some of the fields are not filled correctly");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleMainImageOnChange",value:function(e){var t=this;e.preventDefault();var a=e.target.files[0],n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);console.log(e),t.setState({mainImage:e})},a&&n.readAsArrayBuffer(a)}},{key:"handleTitleChange",value:function(e){e.preventDefault(),this.setState({title:e.target.value})}},{key:"handleSummaryChange",value:function(e){e.preventDefault(),this.setState({summary:e.target.value})}},{key:"handleAddCategory",value:function(e,t){e.preventDefault();var a=this.state.addCategories,n=!1;if(a.forEach((function(e){e.CategoryId===t.CategoryId&&(n=!0)})),n){a.filter((function(e){return e.CategoryId!==t.CategoryId}));var r=a.map((function(e){return e.CategoryId})).indexOf(t.CategoryId);r>=0&&a.splice(r,1),this.setState({addCategories:a})}else a.push(t),this.setState({addCategories:a});console.log(a)}},{key:"loadCategories",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.stringify({}),a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Category",headers:{},data:t},e.next=4,C()(a).then((function(e){console.log(JSON.stringify(e.data)),n.setState({categories:e.data.categories})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadCategories()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("h1",{className:"text-light text-center"},"Article add manager")),r.a.createElement("hr",{className:"bg-light"}),r.a.createElement("form",{className:"bg-secondary p-3",onSubmit:this.handleCreateArticle},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-title"},"Title:"),r.a.createElement("input",{type:"text",name:"article-title",placeholder:"Write the article title",onChange:this.handleTitleChange,className:"form-control",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-summary"},"Summary:"),r.a.createElement("textarea",{className:"form-control",onChange:this.handleSummaryChange,name:"article-summary",placeholder:"Write the summary here",id:"",cols:"30",rows:"3",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-main-image"},"Main image:"),r.a.createElement("input",{type:"file",onChange:this.handleMainImageOnChange,className:"form-control-file",name:"article-main-image",id:"article-main-image",required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Body:"),r.a.createElement(D.a,{editor:R.a,data:"<p>Write the article here!</p>",onInit:function(e){console.log("Editor is ready to use!",e)},onChange:function(t,a){var n=a.getData();console.log({event:t,editor:a,data:n}),e.setState({body:n})},onBlur:function(e,t){console.log("Blur.",t)},onFocus:function(e,t){console.log("Focus.",t)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"jumbotron bg-secondary p-5"},r.a.createElement("h4",null,"Categories:"),r.a.createElement("hr",null),this.state.categories.map((function(t,a){return r.a.createElement("div",{key:a,className:"form-check"},r.a.createElement("input",{type:"checkbox",name:"checkbox".concat(t.CategoryId),id:"checkbox".concat(t.CategoryId),className:"form-check-input",onInput:function(a){e.handleAddCategory(a,t)}}),r.a.createElement("label",{htmlFor:"checkbock".concat(t.CategoryId),className:"form-check-label"},t.Name))}))))),r.a.createElement("button",{className:"btn btn-dark btn-block",type:"submit"},"Create article")))}}]),a}(n.Component),q=Object(b.g)(H),G=a(151),J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={articleId:n.props.articleId,article:{},isModalShowing:n.props.show},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadArticleData()}},{key:"loadArticleData",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/GetAllArticlesById?id=".concat(this.state.articleId),headers:{},data:t},C()(a).then((function(e){console.log(e.data),n.setState({article:e.data})})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{size:"lg",show:this.state.isModalShowing,onHide:function(){return e.props.handleModalShow(null,!1,null)},"aria-labelledby":"example-modal-sizes-title-lg"},r.a.createElement(G.a.Header,{closeButton:!0},r.a.createElement(G.a.Title,{id:"example-modal-sizes-title-lg"},this.state.article.Title)),r.a.createElement(G.a.Body,null,r.a.createElement("img",{src:"data:image/jpeg;base64,"+this.state.article.MainImage,alt:"",style:{maxWidth:"100%"}}),r.a.createElement("article",{id:"articleBody",dangerouslySetInnerHTML:{__html:this.state.article.Body}})))}}]),a}(n.Component),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={hiddenArticles:[]},n.loadHiddenArticles=n.loadHiddenArticles.bind(Object(c.a)(n)),n.handlePublish=n.handlePublish.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadHiddenArticles()}},{key:"deleteArticle",value:function(e,t){var a=this;e.preventDefault();var n={method:"delete",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/deleteArticle?id=".concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:{}};C()(n).then((function(e){a.loadHiddenArticles()})).catch((function(e){401===e.response.status&&(alert("Session has expired, login and try again"),localStorage.clear(),a.props.history.push("/login"))}))}},{key:"handlePublish",value:function(){var e=Object(g.a)(m.a.mark((function e(t,a){var n,r,l=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=I.a.stringify({}),r={method:"put",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/PublishArticle/?articleId=".concat(a),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:n},e.next=5,C()(r).then((function(e){l.loadHiddenArticles()})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadHiddenArticles",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/GetUnpublishedArticles",headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:t},e.next=4,C()(a).then((function(e){console.log(e.data),n.setState({hiddenArticles:e.data}),console.log("me cargu\xe9")})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-responsive table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Date created"),r.a.createElement("th",null,"Created by"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.hiddenArticles.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.Title),r.a.createElement("td",null,t.CreatedAt),r.a.createElement("td",null,"Example user"),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(a){e.handlePublish(a,t.ArticleId)}},"Publish"),r.a.createElement(p.b,{className:"btn btn-block btn-secondary",to:"/articleUpdate/".concat(t.ArticleId)},"Edit"),r.a.createElement("button",{className:"btn block btn-secondary",onClick:function(a){e.deleteArticle(a,t.ArticleId)}},"Delete"),r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(a){e.props.handleModalShow(a,!0,t.ArticleId)}},"Preview")))})))))}}]),a}(n.Component),_=Object(b.g)(W),K=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={articles:[],totalPages:0,pageSize:6,pageCount:1},n.loadPublishedArticles=n.loadPublishedArticles.bind(Object(c.a)(n)),n.handleHideArticle=n.handleHideArticle.bind(Object(c.a)(n)),n.handleShowMore=n.handleShowMore.bind(Object(c.a)(n)),n.deleteArticle=n.deleteArticle.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadPublishedArticles()}},{key:"deleteArticle",value:function(e,t){var a=this;e.preventDefault();var n={method:"delete",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/deleteArticle?id=".concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:{}};C()(n).then((function(e){a.loadPublishedArticles()})).catch((function(e){401===e.response.status&&(alert("Session has expired, login and try again"),localStorage.clear(),a.props.history.push("/login"))}))}},{key:"handleHideArticle",value:function(e,t){var a=this;e.preventDefault();var n={method:"put",url:"https://newsappapi20200817171221.azurewebsites.net/api/UnpublishArticle?id=".concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:{}};C()(n).then((function(e){a.loadPublishedArticles()})).catch((function(e){401===e.response.status&&(alert("The session has expired, login and try again"),localStorage.clear(),a.props.history.push("/login"))}))}},{key:"handleShowMore",value:function(e){var t=this;e.preventDefault(),this.state.pageCount<this.state.totalPages&&this.setState({pageCount:this.state.pageCount+1},(function(){t.state.searchCriteria?(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.getArticlesByTitle(t.state.searchCriteria)):(t.state.articles.length>0&&t.setState({loadingMore:!0}),t.loadPublishedArticles())}))}},{key:"loadPublishedArticles",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/GetArticles?pageNumber=".concat(this.state.pageCount,"&pageSize=").concat(this.state.pageSize),headers:{},data:""},e.next=4,C()(t).then((function(e){var t;a.state.pageCount>1?(t=Object(U.a)(a.state.articles),e.data.items.length>0&&e.data.items.forEach((function(e){t.push(e)}))):t=e.data.items,a.setState({articles:t}),a.setState({totalPages:e.data.totalPages}),console.log(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table table-responsive table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Date created"),r.a.createElement("th",null,"Created by"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.articles.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.Title),r.a.createElement("td",null,t.CreatedAt),r.a.createElement("td",null,"Example user"),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(a){e.handleHideArticle(a,t.ArticleId)}},"Hide article"),r.a.createElement(p.b,{className:"btn btn-block btn-secondary",to:"/articleUpdate/".concat(t.ArticleId)},"Edit article"),r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(a){e.deleteArticle(a,t.ArticleId)}},"Delete"),r.a.createElement("button",{className:"btn btn-secondary btn-block",onClick:function(a){e.props.handleModalShow(a,!0,t.ArticleId)}},"Preview")))})))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleShowMore,className:"btn text-center btn-block btn-secondary"},"Show more")))}}]),a}(n.Component),$=Object(b.g)(K),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={unPublishedArticles:[],isModalShowing:!1,selectedArticleId:0},n.loadUnPublishedArticles=n.loadUnPublishedArticles.bind(Object(c.a)(n)),n.handlePublish=n.handlePublish.bind(Object(c.a)(n)),n.handleModalShow=n.handleModalShow.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadUnPublishedArticles()}},{key:"handleModalShow",value:function(e,t,a){var n=this;e&&e.preventDefault(),this.setState({selectedArticleId:a},(function(){n.setState({isModalShowing:t})}))}},{key:"handlePublish",value:function(){var e=Object(g.a)(m.a.mark((function e(t,a){var n,r,l=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=I.a.stringify({}),r={method:"post",url:"https://newsappapi20200817171221.azurewebsites.net/api/Articles/PublishArticle/?userId=b7ba64f8-9b22-4904-b6e1-0c173cd776ec&articleId=".concat(a),headers:{},data:n},e.next=5,C()(r).then((function(e){l.loadUnPublishedArticles()})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadUnPublishedArticles",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.stringify({}),a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/articles/GetUnpublishedArticles",headers:{},data:t},e.next=4,C()(a).then((function(e){n.setState({unPublishedArticles:e.data}),console.log(e)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,this.state.isModalShowing?r.a.createElement(J,{show:!0,articleId:this.state.selectedArticleId,handleModalShow:this.handleModalShow}):null,r.a.createElement(y.a,{justify:!0,variant:"tabs",defaultActiveKey:"/publishedArticles"},r.a.createElement(y.a.Item,null,r.a.createElement(p.b,{className:"bg-secondary text-dark nav-link",to:"/publishArticles/publishedArticles",eventKey:"/publishedArticles"},"Published articles")),r.a.createElement(y.a.Item,null,r.a.createElement(p.b,{className:"bg-secondary text-dark nav-link",to:"/publishArticles/hiddenArticles",eventKey:"/hiddenArticles"},"Unpublished articles"))),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/publishArticles/publishedArticles"},r.a.createElement($,{handleModalShow:this.handleModalShow})),r.a.createElement(b.b,{path:"/publishArticles/hiddenArticles"},r.a.createElement(_,{handleModalShow:this.handleModalShow}))))}}]),a}(n.Component),V=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={articleId:n.props.match.params.id,article:{},title:"",summary:"",mainImage:[],body:"",categories:[],imageShow:[]},n.loadOriginalData=n.loadOriginalData.bind(Object(c.a)(n)),n.handleUpdateArticle=n.handleUpdateArticle.bind(Object(c.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(c.a)(n)),n.handleSummaryChange=n.handleSummaryChange.bind(Object(c.a)(n)),n.loadCategories=n.loadCategories.bind(Object(c.a)(n)),n.handleAddCategory=n.handleAddCategory.bind(Object(c.a)(n)),n.setOriginalCategories=n.setOriginalCategories.bind(Object(c.a)(n)),n.handleMainImageChange=n.handleMainImageChange.bind(Object(c.a)(n)),n.addCategories=[],n}return Object(i.a)(a,[{key:"handleAddCategory",value:function(e,t){e.preventDefault();var a=this.addCategories,n=!1;if(this.addCategories.forEach((function(e){e.CategoryId===t.CategoryId&&(n=!0)})),n){this.addCategories.filter((function(e){return e.CategoryId!==t.CategoryId}));var r=a.map((function(e){return e.CategoryId})).indexOf(t.CategoryId);r>=0&&a.splice(r,1)}else this.addCategories.push(t);console.log(this.addCategories)}},{key:"loadCategories",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/Category",headers:{},data:{}},e.next=4,C()(t).then((function(e){a.setState({categories:e.data.categories})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadOriginalData",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({}),n={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/GetAllArticlesById/?id=".concat(t),headers:{},data:a},e.next=4,C()(n).then((function(e){r.setState({article:e.data}),r.addCategories=e.data.Categories,r.setState({title:e.data.Title}),r.setState({summary:e.data.Summary}),r.setState({body:e.data.Body}),r.setState({mainImage:e.data.MainImage}),r.setState({imageShow:e.data.MainImage}),console.log(e.data.MainImage),r.setState({title:e.data.Title})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleMainImageChange",value:function(e){var t=this;e.preventDefault();var a=e.target.files[0],n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);console.log(e),t.setState({mainImage:Array.from(e)}),t.setState({imageShow:btoa(String.fromCharCode.apply(null,e))}),console.log(t.state.showImage)},a&&n.readAsArrayBuffer(a),console.log(this.state.mainImage)}},{key:"handleTitleChange",value:function(e){e.preventDefault(),this.setState({title:e.target.value})}},{key:"handleSummaryChange",value:function(e){e.preventDefault(),this.setState({summary:e.target.value})}},{key:"handleBodyChange",value:function(e){e.preventDefault(),this.setState({body:e.target.value})}},{key:"setOriginalCategories",value:function(e){var t=!1;if(this.addCategories.forEach((function(a){a.CategoryId===e.CategoryId&&(t=!0)})),t)return!0}},{key:"handleCategoryChange",value:function(e){e.preventDefault()}},{key:"handleUpdateArticle",value:function(e){var t=this;e.preventDefault();var a={method:"put",url:"/api/Articles/UpdateArticle",headers:{"Content-Type":"application/json"},data:JSON.stringify({ArticleId:this.state.articleId,Title:this.state.title,Summary:this.state.summary,MainImage:this.state.mainImage,Body:this.state.body,Categories:this.addCategories})};C()(a).then((function(e){t.props.history.push("/")})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.loadOriginalData(this.state.articleId),this.loadCategories()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("h1",{className:"text-light text-center"},"Article Update manager")),r.a.createElement("hr",{className:"bg-light"}),r.a.createElement("form",{className:"bg-secondary p-3",onSubmit:this.handleUpdateArticle},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-title"},"Title:"),r.a.createElement("input",{type:"text",name:"article-title",placeholder:"Write the article title",onChange:this.handleTitleChange,className:"form-control",value:this.state.title,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-summary"},"Summary:"),r.a.createElement("textarea",{className:"form-control",onChange:this.handleSummaryChange,value:this.state.summary,name:"article-summary",placeholder:"Write the summary here",id:"",cols:"30",rows:"3",required:!0})),r.a.createElement("label",{htmlFor:""},"Main image: "),r.a.createElement("div",{className:"form-group"},r.a.createElement("img",{src:"data:image/jpeg;base64,"+this.state.imageShow,alt:"",style:{width:"25%"}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-main-image"},"Upload for a new main Image:"),r.a.createElement("input",{type:"file",onChange:this.handleMainImageChange,className:"form-control-file",name:"article-main-image",id:"article-main-image"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:""},"Body:"),r.a.createElement(D.a,{editor:R.a,data:this.state.body,onInit:function(e){},onChange:function(t,a){var n=a.getData();e.setState({body:n})},onBlur:function(e,t){console.log("Blur.",t)},onFocus:function(e,t){console.log("Focus.",t)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"jumbotron bg-secondary p-5"},r.a.createElement("h4",null,"Categories:"),r.a.createElement("hr",null),this.state.categories.map((function(t,a){return r.a.createElement("div",{key:a,className:"form-check"},r.a.createElement("input",{type:"checkbox",name:"checkbox".concat(t.CategoryId),id:"checkbox".concat(t.CategoryId),className:"form-check-input",onInput:function(a){e.handleAddCategory(a,t)},defaultChecked:e.setOriginalCategories(t)}),r.a.createElement("label",{htmlFor:"checkbock".concat(t.CategoryId),className:"form-check-label"},t.Name))}))))),r.a.createElement("button",{className:"btn btn-dark btn-block",type:"submit"},"Update article")))}}]),a}(n.Component),X=Object(b.g)(V),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={users:[]},n.loadUsers=n.loadUsers.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this,t={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/User/GetAllUsers",headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:{}};C()(t).then((function(t){e.setState({users:t.data})})).catch((function(t){401===t.response.status&&(alert("Session has expired, log in and try again"),localStorage.clear(),e.props.history.push("/login"))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"table table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Email"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.users.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.Email),r.a.createElement("td",null,r.a.createElement(p.b,{className:"btn btn-block btn-secondary",to:"/userRoleUpdate/".concat(e.Id)},"Edit role")))})))))}}]),a}(n.Component),Z=Object(b.g)(Y),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={userId:n.props.match.params.id,user:{},roles:[]},n.loadUser=n.loadUser.bind(Object(c.a)(n)),n.loadRoles=n.loadRoles.bind(Object(c.a)(n)),n.updateRole=n.updateRole.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadUser(),this.loadRoles()}},{key:"updateRole",value:function(e,t){var a=this;e.preventDefault();var n={method:"put",url:"https://newsappapi20200817171221.azurewebsites.net/api/User/UpdateUserRole?userId=".concat(this.state.userId,"&roleId=").concat(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:{}};C()(n).then((function(e){a.props.history.push("/users")})).catch((function(e){401===e.response.status&&(alert("Session expired, login and try again"),localStorage.clear(),a.props.history.psuh("/login"))}))}},{key:"loadRoles",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/GetRolesNotInUser?id=".concat(this.state.userId),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:t},e.next=4,C()(a).then((function(e){n.setState({roles:e.data})})).catch((function(e){console.log(e),401===e.response.status&&(alert("Session has expired, login and try again"),localStorage.clear(),n.props.history.push("/login"))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUser",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a={method:"get",url:"https://newsappapi20200817171221.azurewebsites.net/api/User/GetById?id=".concat(this.state.userId),headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))},data:t},e.next=4,C()(a).then((function(e){n.setState({user:e.data})})).catch((function(e){401===e.response.status&&(alert("Session has expired, login and try again"),localStorage.clear(),n.props.history.push("/login"))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"table table-dark"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Select new role"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,this.state.user.Email),r.a.createElement("td",null,this.state.roles.map((function(t,a){return r.a.createElement("button",{key:a,onClick:function(a){e.updateRole(a,t.Id)},className:"btn btn-block btn-secondary"},t.Name)}))))))))}}]),a}(n.Component),te=Object(b.g)(ee),ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isUserLoggedIn:localStorage.getItem("isUserLoggedIn"),username:localStorage.getItem("userName")},n.handleUserLoggedIn=n.handleUserLoggedIn.bind(Object(c.a)(n)),n.handleUserLoggedOut=n.handleUserLoggedOut.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handleUserLoggedIn",value:function(e){this.setState({isUserLoggedIn:e}),console.log(e)}},{key:"handleUserLoggedOut",value:function(){this.setState({isUserLoggedIn:!1}),console.log(this.state.isUserLoggedIn)}},{key:"render",value:function(){var e=this,t=this.state.isUserLoggedIn;return r.a.createElement("div",{className:"bg-secondary min-vh-100"},r.a.createElement(p.a,null,r.a.createElement(N,{isUserLoggedIn:this.state.isUserLoggedIn,handleUserLoggedOut:this.handleUserLoggedOut,username:localStorage.getItem("userName"),userFullName:"F\xe9lix Junior P\xe9rez Peguero"}),r.a.createElement("div",{className:"container bg-dark min-vh-100",style:{marginTop:56}},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/felix-news-app/",render:function(t){return r.a.createElement(T,Object.assign({},t,{isUserLoggedIn:e.state.isUserLoggedIn}))}}),r.a.createElement(b.b,{exact:!0,path:"/about"},r.a.createElement(w,null)),r.a.createElement(b.b,{exact:!0,path:"/registration"},t?r.a.createElement(b.a,{to:"/"}):r.a.createElement(O,null)),r.a.createElement(b.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(x,Object.assign({},t,{isUserLoggedIn:e.state.isUserLoggedIn,handleUserLoggedIn:e.handleUserLoggedIn}))}}),r.a.createElement(b.b,{exact:!0,path:"/articles/:id",component:P}),r.a.createElement(b.b,{path:"/articles/byCategories/:id",component:B}),r.a.createElement(b.b,{path:"/publishArticles",component:Q}),r.a.createElement(b.b,{exact:!0,path:"/articleAdd",component:q}),r.a.createElement(b.b,{exact:!0,path:"/articleUpdate/:id",component:X}),r.a.createElement(b.b,{exact:!0,path:"/users",component:Z}),r.a.createElement(b.b,{exact:!0,path:"/userRoleUpdate/:id",component:te}),r.a.createElement(b.b,{component:L})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,a){e.exports=a(146)}},[[97,1,2]]]);
//# sourceMappingURL=main.f33b6a11.chunk.js.map